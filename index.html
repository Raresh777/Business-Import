<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rares+</title>
    <style>
        /* Your CSS Styles */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: goldenrod;
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: gold;
        }

        body {
            background: linear-gradient(to bottom, #333333, silver);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: auto;
            color: black;
        }
        /* ... (rest of the styles, as you provided them) ... */
    </style>
</head>

<body>
    <div class="button-container">
        <button id="generateButton">Bundle</button>
    </div>
    <div class="output-container" id="bundleBoxes"></div>
    <div class="button-container">
        <button id="supportButton">Support Message</button>
    </div>
    <div class="output-container" id="supportBoxes"></div>

    <script>
        let usedSentencesBundle = [];
        let usedSentencesSupport = [];

        document.addEventListener("DOMContentLoaded", function () {
            document
                .getElementById("generateButton")
                .addEventListener("click", async function () {
                    await generateMessages(
                        "bundleBoxes",
                        "https://raw.githubusercontent.com/Raresh777/TextAutomator/main/bld.txt",
                        usedSentencesBundle
                    );
                });

            document
                .getElementById("supportButton")
                .addEventListener("click", async function () {
                    await generateMessages(
                        "supportBoxes",
                        "https://raw.githubusercontent.com/Raresh777/TextAutomator/main/supp.txt",
                        usedSentencesSupport
                    );
                });
        });

        async function generateMessages(containerId, url, usedSentences) {
            clearPreviousBoxes(containerId);
            let localUsed = [];
            for (let i = 1; i <= 3; i++) {
                const sentence = await getRandomSentence(url, usedSentences);
                usedSentences.push(sentence);
                localUsed.push(sentence);
                generateBox(sentence, i, containerId);
            }

            // Reset if all sentences have been used
            const response = await fetch(url);
            const text = await response.text();
            const totalSentences = text.trim().split("^").length;
            if (usedSentences.length >= totalSentences) {
                usedSentences.length = 0; 
            }
        }

        async function getRandomSentence(url, usedSentences) {
            const response = await fetch(url);
            const text = await response.text();
            const sentences = text.trim().split("^");
            let randomSentence;

            do {
                randomSentence = sentences[Math.floor(Math.random() * sentences.length)];
            } while (usedSentences.includes(randomSentence));

            return randomSentence;
        }

        function generateBox(sentence, index, containerId) {
            const outputElement = document.createElement("div");
            outputElement.className =
                containerId === "bundleBoxes" ? "output-box" : "support-output-box";

            const contentElement = document.createElement("div");
            contentElement.id = `output${containerId}${index}`;
            contentElement.innerHTML = sentence;
            outputElement.appendChild(contentElement);

            const copyButton = document.createElement("button");
            copyButton.className = "copy-button";
            copyButton.innerHTML = "Copy Text";
            copyButton.onclick = function (event) {
                copyToClipboard(event, `output${containerId}${index}`);
            };
            outputElement.appendChild(copyButton);

            document.getElementById(containerId).appendChild(outputElement);
        }

        function clearPreviousBoxes(containerId) {
            const container = document.getElementById(containerId);
            while (container.firstChild) {
                container.removeChild(container.lastChild);
            }
        }

        // Copy to clipboard function
        function copyToClipboard(event, elementId) {
            const textToCopy = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(textToCopy);

            const confirmation = document.createElement("div");
            confirmation.textContent = "Copied ðŸ«¡";
            confirmation.className = "copy-confirmation";
            confirmation.style.left = `${event.clientX}px`;
            confirmation.style.top = `${event.clientY}px`;

            document.body.appendChild(confirmation);

            setTimeout(() => {
                document.body.removeChild(confirmation);
            }, 2000);
        }
    </script>
</body>

</html>
